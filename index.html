<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Catan</title>
    <link rel="stylesheet" href="src/css/style.css">
</head>

<body>

    <template id="config-template">
        <div class="modal-container">
            <div class="modal">
                <h2 style="text-align: center">Game Settings</h2>
                <label for="map-size">Board radius (hex rings)</label>
                <input type="range" id="map-size" min="2" max="5" value="3"
                    oninput="this.nextElementSibling.value = this.value">
                <output id="map-size-value">3</output>

                <label for="human-players">Human players</label>
                <input type="range" id="human-players" min="1" max="4" value="1"
                    oninput="this.nextElementSibling.value = this.value">
                <output id="human-players-value">1</output>

                <label for="ai-players">AI players</label>
                <input type="range" id="ai-players" min="0" max="3" value="1"
                    oninput="this.nextElementSibling.value = this.value">
                <output id="ai-players-value">1</output>

                <button id="start-game">Start Game</button>
            </div>
        </div>
    </template>

    <template id="game-template">
        <div id="game-container">
            <svg id="map-svg" xmlns="http://www.w3.org/2000/svg" width="1200" height="600" viewBox="-600 -300 1200 600">
                <g id="defs-layer"></g> <!-- Definitions layer for patterns (terrain and tokens)-->
                <g id="static-layer"></g> <!-- static, tile, port and token layer, should not change through the game -->
                <g id="road-layer"></g>
                <g id="settlement-layer"></g>
                <g id="robber-layer"></g>
                <g id="interaction-layer"></g> <!-- for user click and select on map (build road/settlement/rob) -->
            </svg>

            <!-- Show player hands -->
            <div id="player-hands-resources-container"></div>
            <!-- Show player dev cards (unused) -->
            <div id="player-hands-devcards-container"></div>
            <!-- Show player used dev cards -->
            <div id="player-used-devcards-container"></div>

            <div id="ui-layer">
                <div id="dice-layer">
                    <div id="dice-result">Roll: 0 + 0 = 0</div>
                    <button id="dice-btn">Roll Dice</button>
                </div>

                <div id="action-layer">
                    <button id="build-road-btn">Build Road</button>
                    <button id="build-settlement-btn">Build Settlement</button>
                    <button id="build-city-btn">Build City</button>
                    <button id="buy-dev-card-btn">Buy Dev Card</button>
                    <button id="cancel-btn">Cancel</button>
                </div>
                <button id="end-turn-btn">End Turn</button>
            </div>
        </div>
    </template>

    <template id="action-confirm-template">
        <div class="modal-overlay" id="confirm-modal">
            <div class="confirm-card">
                <h3 id="confirm-title">Are you sure?</h3>
                <p id="confirm-message">This action cannot be undone.</p>
                <div class="modal-buttons">
                    <button id="action-confirm-btn" class="btn-primary">Confirm</button>
                    <button id="action-cancel-btn" class="btn-secondary">Cancel</button>
                </div>
            </div>
        </div>
    </template>

    <template id="universal-modal-template">
        <div class="modal-overlay">
            <div class="modal-card">
                <h1 id="modal-title"></h1>

                <div id="modal-body"></div>

                <div id="modal-btns"></div>
                <div id="modal-footer">
                </div>
            </div>
        </div>
    </template>


    <template id="game-over-template">
        <div class="game-over-overlay">
            <div class="game-over-card">
                <h1>Game Over!</h1>
                <div id="winner-announcement"></div>
                <button id="play-again-btn" onclick="location.reload()">Play Again</button>
            </div>
        </div>
    </template>

    <div id="main-wrapper">
        <!-- The game will be rendered here -->
    </div>

    <div>
        <div id="debug-toggle-container">
            <label class="toggle-switch">
                <input type="checkbox" id="debug-toggle-btn">
                <span class="slider"></span>
            </label>
            <span class="debug-label">Debug Console</span>
        </div>

        <div id="debug-wrapper" class="hidden">
            <div id="debug-dashboard">
            </div>
            <div id="debug-input-area">
                <textarea id="debug-input" placeholder="Enter debug command here..."></textarea>
                <button id="debug-submit">Submit</button>
            </div>
        </div>
    </div>

    <template id="card-template">
        <div class="card-container">
            <img class="card-image" src="" alt="Card Image">
        </div>
    </template>

    <template id="card-action-menu-template">
        <div class="card-popover">
            <div class="popover-row action" id="play-dev-card-btn">Play</div>
            <div class="popover-row cancel" id="cancel-dev-card-btn">Cancel</div>
        </div>
    </template>


    <script type="module" src="src/js/core/GameEngine.js"></script>
</body>

</html>